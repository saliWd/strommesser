# vga1 16x16 pixel font
# For Pimoroni Pico display 2 320x240 pixels in RGB332 mode
# Uses Pimoroni Pico Graphics system
# Tony Goodhew 24th Feb 2023

# lots of useful links:
# https://forums.pimoroni.com/t/pico-display-and-fonts/16194/18
# or maybe directly use this one:
# https://github.com/leswright1977/picofont/tree/main

from picographics import PicoGraphics, DISPLAY_PICO_DISPLAY_2, PEN_P4 # type: ignore
from pimoroni import RGBLED # type: ignore
led = RGBLED(6, 7, 8)
led.set_rgb(255,0,0)
# https://github.com/russhughes/ili9342c_mpy/blob/main/fonts/bitmap/vga1_16x16.py

############## FIXME: this is not yet working
WIDTH = 16
HEIGHT = 32
FIRST = 0x30
LAST = 0x3f
_FONT = \
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\xe0\x07\xe0\x1c\x38\x1c\x38\x38\x3c\x38\x3c\x38\x7c\x38\x7c\x38\xdc\x38\xdc\x39\x9c\x39\x9c\x3b\x1c\x3b\x1c\x3e\x1c\x3e\x1c\x3c\x1c\x3c\x1c\x1c\x38\x1c\x38\x07\xe0\x07\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x01\xc0\x01\xc0\x03\xc0\x03\xc0\x0f\xc0\x0f\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xf0\x0f\xf0\x38\x1c\x38\x1c\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x1c\x00\x1c\x00\x70\x00\x70\x01\xc0\x01\xc0\x07\x00\x07\x00\x1c\x00\x1c\x00\x38\x00\x38\x00\x3f\xfe\x3f\xfe\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xf0\x0f\xf0\x38\x1c\x38\x1c\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x1c\x00\x1c\x01\xf0\x01\xf0\x00\x1c\x00\x1c\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x38\x1c\x38\x1c\x0f\xf0\x0f\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x01\xf0\x01\xf0\x03\xf0\x03\xf0\x07\x70\x07\x70\x0e\x70\x0e\x70\x1c\x70\x1c\x70\x38\x70\x38\x70\x3f\xfc\x3f\xfc\x00\x70\x00\x70\x00\x70\x00\x70\x00\x70\x00\x70\x00\x70\x00\x70\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x3f\xfe\x3f\xfe\x38\x00\x38\x00\x38\x00\x38\x00\x38\x00\x38\x00\x3f\xf0\x3f\xf0\x00\x1c\x00\x1c\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x38\x1c\x38\x1c\x0f\xf0\x0f\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf0\x07\xf0\x1c\x00\x1c\x00\x38\x00\x38\x00\x38\x00\x38\x00\x38\x00\x38\x00\x3f\xf0\x3f\xf0\x38\x1c\x38\x1c\x38\x0e\x38\x0e\x38\x0e\x38\x0e\x1c\x1c\x1c\x1c\x07\xf0\x07\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x3f\xf8\x3f\xf8\x00\x38\x00\x38\x00\x38\x00\x38\x00\x70\x00\x70\x00\xe0\x00\xe0\x01\xc0\x01\xc0\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf0\x07\xf0\x1c\x1c\x1c\x1c\x38\x0e\x38\x0e\x38\x0e\x38\x0e\x1c\x1c\x1c\x1c\x07\xf0\x07\xf0\x1c\x1c\x1c\x1c\x38\x0e\x38\x0e\x38\x0e\x38\x0e\x1c\x1c\x1c\x1c\x07\xf0\x07\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\xf0\x07\xf0\x1c\x1c\x1c\x1c\x38\x0e\x38\x0e\x38\x0e\x38\x0e\x1c\x0e\x1c\x0e\x07\xfe\x07\xfe\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x0e\x00\x1c\x00\x1c\x0f\xf0\x0f\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x03\x80\x03\x80\x07\x00\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe0\x00\xe0\x01\xc0\x01\xc0\x03\x80\x03\x80\x07\x00\x07\x00\x0e\x00\x0e\x00\x1c\x00\x1c\x00\x0e\x00\x0e\x00\x07\x00\x07\x00\x03\x80\x03\x80\x01\xc0\x01\xc0\x00\xe0\x00\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x3f\xfc\x3f\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x3f\xfc\x3f\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\x00\x07\x00\x03\x80\x03\x80\x01\xc0\x01\xc0\x00\xe0\x00\xe0\x00\x70\x00\x70\x00\x38\x00\x38\x00\x70\x00\x70\x00\xe0\x00\xe0\x01\xc0\x01\xc0\x03\x80\x03\x80\x07\x00\x07\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x07\xe0\x07\xe0\x1c\x38\x1c\x38\x38\x1c\x38\x1c\x00\x38\x00\x38\x00\x70\x00\x70\x00\xe0\x00\xe0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x00\x00\x00\x00\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
## end of fixme


WIDTH = 16
HEIGHT = 16
FIRST = 0x30
LAST = 0x3f
_FONT = \
b'\x00\x00\x00\x00\x07\xe0\x1c\x38\x38\x3c\x38\x7c\x38\xdc\x39\x9c\x3b\x1c\x3e\x1c\x3c\x1c\x1c\x38\x07\xe0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x01\xc0\x03\xc0\x0f\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x01\xc0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x0f\xf0\x38\x1c\x00\x0e\x00\x0e\x00\x1c\x00\x70\x01\xc0\x07\x00\x1c\x00\x38\x00\x3f\xfe\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x0f\xf0\x38\x1c\x00\x0e\x00\x0e\x00\x1c\x01\xf0\x00\x1c\x00\x0e\x00\x0e\x38\x1c\x0f\xf0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x01\xf0\x03\xf0\x07\x70\x0e\x70\x1c\x70\x38\x70\x3f\xfc\x00\x70\x00\x70\x00\x70\x00\x70\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x3f\xfe\x38\x00\x38\x00\x38\x00\x3f\xf0\x00\x1c\x00\x0e\x00\x0e\x00\x0e\x38\x1c\x0f\xf0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x07\xf0\x1c\x00\x38\x00\x38\x00\x38\x00\x3f\xf0\x38\x1c\x38\x0e\x38\x0e\x1c\x1c\x07\xf0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x3f\xf8\x00\x38\x00\x38\x00\x70\x00\xe0\x01\xc0\x03\x80\x03\x80\x03\x80\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x07\xf0\x1c\x1c\x38\x0e\x38\x0e\x1c\x1c\x07\xf0\x1c\x1c\x38\x0e\x38\x0e\x1c\x1c\x07\xf0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x07\xf0\x1c\x1c\x38\x0e\x38\x0e\x1c\x0e\x07\xfe\x00\x0e\x00\x0e\x00\x0e\x00\x1c\x0f\xf0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x03\x80\x07\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\xe0\x01\xc0\x03\x80\x07\x00\x0e\x00\x1c\x00\x0e\x00\x07\x00\x03\x80\x01\xc0\x00\xe0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x3f\xfc\x00\x00\x00\x00\x3f\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x07\x00\x03\x80\x01\xc0\x00\xe0\x00\x70\x00\x38\x00\x70\x00\xe0\x01\xc0\x03\x80\x07\x00\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x07\xe0\x1c\x38\x38\x1c\x00\x38\x00\x70\x00\xe0\x01\xc0\x01\xc0\x00\x00\x01\xc0\x01\xc0\x00\x00\x00\x00\x00\x00'\
b'\x00\x00\x00\x00\x0f\xf0\x38\x1c\x70\x0e\x71\xfe\x73\x8e\x73\x8e\x73\x8e\x71\xfc\x70\x00\x38\x00\x0f\xfc\x00\x00\x00\x00\x00\x00'\

FONT = memoryview(_FONT)
# Reduced colours to save RAM
display = PicoGraphics(display=DISPLAY_PICO_DISPLAY_2, pen_type=PEN_P4, rotate=0)
display.set_backlight(0.8)
display.set_font("bitmap8") # Lower case included

def character(asci,xp,yp):
    a = asci-FIRST
    code = []
    start = a*32
    stop = start +32
    for i in range(start,stop):
        byte = FONT[i]
        code.append(byte)
    #print(code)
    #code = b'\x00\x00\x00\x00\x0f\xf0\x38\x1c\x00\x0e\x00\x0e\x00\x1c\x01\xf0\x00\x1c\x00\x0e\x00\x0e\x38\x1c\x0f\xf0\x00\x00\x00\x00\x00\x00'    
    yy = 00
    xx = 00
    y2 = yy
    x2 = xx
    display.set_pen(255)
    for i in range(32):    
        q = code[i]
        for bit in range(8):
            if (q >> bit) & 0x1:
                display.set_pen(255)
            else:
                display.set_pen(0)                   
            display.pixel(16+xp-x2-bit,yp+y2)           
        if i % 2 == 0:
            x2 = xx            
        else:
            y2 = y2+1
            x2 = x2+8

def prnt_st(asci,xx,yy,):  # Text string
    for letter in(asci):
        asci = ord(letter)
        character(asci,xx,yy)
        xx = xx + 16      

prnt_st("0123456789",10,100)
prnt_st("1:20:27:",10,120)
display.update()